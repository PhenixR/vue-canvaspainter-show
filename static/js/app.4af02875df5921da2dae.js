webpackJsonp([1],{DbNm:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s={name:"Canvas",data:function(){return{colors:["#fef4ac","#0018ba","#ffc200","#f32f15","#cccccc","#5ab639"],brushs:[{className:"small fas fa-pencil-alt",lineWidth:3},{className:"middle fas fa-pencil-alt",lineWidth:6},{className:"big fas fa-pencil-alt",lineWidth:12}],config:{lineWidth:1,lineColor:"#f2849e",shadowBlur:2},context:{},canvasMoveUse:!1,preDrawAry:[],nextDrawAry:[],middleAry:[]}},created:function(){this.$emit("setNav","在线涂鸦画板")},mounted:function(){var t=document.querySelector(".canvas");this.context=t.getContext("2d"),this.setCanvasStyle(),this.initDraw()},computed:{controls:function(){return[{title:"上一步",action:"prev",className:this.preDrawAry.length?"active fa fa-reply":"fa fa-reply"},{title:"下一步",action:"next",className:this.nextDrawAry.length?"active fa fa-share":"fa fa-share"},{title:"清除",action:"clear",className:this.preDrawAry.length||this.nextDrawAry.length?"active fa fa-trash":"fa fa-trash"}]}},methods:{initDraw:function(){var t=this.context.getImageData(0,0,800,600);this.middleAry.push(t)},canvasMove:function(t){if(this.canvasMoveUse){var e=t.clientX-t.target.parentNode.offsetLeft+document.body.scrollLeft,n=t.clientY-t.target.parentNode.offsetTop+document.body.scrollTop;this.context.lineTo(e,n),this.context.stroke()}},canvasUp:function(t){var e=this.context.getImageData(0,0,800,600);this.nextDrawArylength?(this.middleAry=[],middleAry=this.middleAry.concat(this.preDrawAry),this.middleAry.push(e),this.nextDrawAry=[]):this.middleAry.push(e),this.canvasMoveUse=!1},canvasOut:function(t){this.canvasMoveUse=!1},canvasDown:function(t){this.canvasMoveUse=!0;var e=t.clientX-t.target.parentNode.offsetLeft+document.body.scrollLeft,n=t.clientY-t.target.parentNode.offsetTop+document.body.scrollTop;this.context.beginPath(),this.setCanvasStyle(),this.context.beginPath(),this.context.moveTo(e,n);var a=this.context.getImageData(0,0,800,600);this.preDrawAry.push(a)},setColor:function(t){this.config.lineColor=t},setWidth:function(t){this.config.lineWidth=t},controlCanvas:function(t){switch(t){case"prev":if(this.preDrawAry.length){var e=this.preDrawAry.pop(),n=this.middleAry[this.preDrawAry.length+1];this.nextDrawAry.push(n),this.context.putImageData(e,0,0)}break;case"next":if(this.nextDrawAry.length){var a=this.nextDrawAry.pop(),s=this.middleAry[this.middleAry.length-this.nextDrawAry.length-2];this.preDrawAry.push(s),this.context.putImageData(a,0,0)}break;case"clear":this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.preDrawAry=[],this.nextDrawAry=[],this.middleAry=[this.middleAry[0]]}},setCanvasStyle:function(){this.context.lineWidth=this.config.lineWidth,this.context.shadowBlur=this.config.shadowBlur,this.context.shadowColor=this.config.lineColor,this.context.strokeStyle=this.config.lineColor}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("div",{staticClass:"container"},[n("canvas",{staticClass:"canvas",attrs:{width:"800px",height:"600px"},on:{mousedown:function(e){t.canvasDown(e)},mousemove:function(e){t.canvasMove(e)},mouseup:function(e){t.canvasUp(e)},mouseleave:function(e){t.canvasOut(e)}}}),t._v(" "),n("div",{staticClass:"tools"},[n("div",{staticClass:"pen_color"},[n("h4",[t._v("画笔颜色")]),t._v(" "),n("ul",t._l(t.colors,function(e){return n("li",{style:{background:e},on:{click:function(n){t.setColor(e)}}})}))]),t._v(" "),n("div",{staticClass:"pen_width"},[n("h4",[t._v("画笔大小")]),t._v(" "),n("ul",t._l(t.brushs,function(e){return n("li",{class:[e.className,{active:t.config.lineWidth===e.lineWidth}],on:{click:function(n){t.setWidth(e.lineWidth)}}})}))]),t._v(" "),n("div",{staticClass:"canvas_control"},[n("h4",[t._v("操作")]),t._v(" "),n("div",{staticClass:"canvas_control_btn"},t._l(t.controls,function(e){return n("span",{class:e.className,attrs:{title:e.title},on:{click:function(n){t.controlCanvas(e.action)}}})}))])])])])},staticRenderFns:[]};var o={name:"App",components:{Canvas:n("VU/8")(s,i,!1,function(t){n("whWb")},null,null).exports}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Canvas")],1)},staticRenderFns:[]};var r=n("VU/8")(o,c,!1,function(t){n("DbNm")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:r},template:"<App/>"})},whWb:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4af02875df5921da2dae.js.map