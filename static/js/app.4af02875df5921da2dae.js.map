{"version":3,"sources":["webpack:///src/components/Canvas.vue","webpack:///./src/components/Canvas.vue?b172","webpack:///./src/components/Canvas.vue","webpack:///src/App.vue","webpack:///./src/App.vue?770b","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["Canvas","setCanvasStyle","initDraw","preData","scrollLeft","scrollTop","canvasY","stroke","preDrawAry","beginPath","color","type","action","pop","midData","_midData","height","lineWidth","shadowBlur","lineColor","components_Canvas","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","width","on","mousedown","$event","canvasDown","mousemove","canvasMove","mouseup","canvasUp","mouseleave","canvasOut","_v","_l","item","style","background","click","setColor","pen","class","className","active","config","setWidth","control","title","controlCanvas","staticRenderFns","App","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","id","src_App","App_normalizeComponent","vue_esm","productionTip","el","components","template"],"mappings":"0IA4GAA,QAEA,0FAGA,8BAEA,oCACA,cAEA,qCACA,cAEA,kCAEA,uBAEA,YACA,qBAEA,6BAEA,qFAOA,2DAGA,qCACA,WACAC,sBACAC,wDAKA,aACA,6DACA,sBAEA,aACA,8DACA,sBAEA,YACA,uFAEA,uFAKA,yBACAC,iDAGA,8DACAC,mEACAC,gCACAC,gBACAC,wEAKA,oFAKAC,gCACAL,4CAJAA,uBAOA,6CAGA,8CAIA,+DAGAC,mEACAC,uBACAI,iBACAR,8BAEAQ,kCACAH,2CACA,0BACAH,+CAGAO,8CAGAC,oCAGAC,OACA,iCACA,uBACAC,8CACA,yBACAC,iCACA,GAEA,UACA,kCACA,wBACAD,qEACA,wBACAE,iCACA,GAEA,UACA,iFACAC,8EAGA,mEAKAC,8CACAC,gDACAC,+CACAA,aC/OAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,UAAeE,YAAA,SAAAC,OAA4BC,MAAA,QAAAd,OAAA,SAAiCe,IAAKC,UAAA,SAAAC,GAA6BX,EAAAY,WAAAD,IAAuBE,UAAA,SAAAF,GAA8BX,EAAAc,WAAAH,IAAuBI,QAAA,SAAAJ,GAA4BX,EAAAgB,SAAAL,IAAqBM,WAAA,SAAAN,GAA+BX,EAAAkB,UAAAP,OAAwBX,EAAAmB,GAAA,KAAAf,EAAA,OAAwBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,MAAAJ,EAAAmB,GAAA,UAAAnB,EAAAmB,GAAA,KAAAf,EAAA,KAAAJ,EAAAoB,GAAApB,EAAA,gBAAAqB,GAAmF,OAAAjB,EAAA,MAAgBkB,OAAQC,WAAAF,GAAiBZ,IAAMe,MAAA,SAAAb,GAAyBX,EAAAyB,SAAAJ,YAAuBrB,EAAAmB,GAAA,KAAAf,EAAA,OAA2BE,YAAA,cAAwBF,EAAA,MAAAJ,EAAAmB,GAAA,UAAAnB,EAAAmB,GAAA,KAAAf,EAAA,KAAAJ,EAAAoB,GAAApB,EAAA,gBAAA0B,GAAkF,OAAAtB,EAAA,MAAgBuB,OAAAD,EAAAE,WAAsBC,OAAA7B,EAAA8B,OAAAnC,YAAA+B,EAAA/B,YAAiDc,IAAMe,MAAA,SAAAb,GAAyBX,EAAA+B,SAAAL,EAAA/B,oBAAgCK,EAAAmB,GAAA,KAAAf,EAAA,OAA2BE,YAAA,mBAA6BF,EAAA,MAAAJ,EAAAmB,GAAA,QAAAnB,EAAAmB,GAAA,KAAAf,EAAA,OAAgDE,YAAA,sBAAiCN,EAAAoB,GAAApB,EAAA,kBAAAgC,GAAyC,OAAA5B,EAAA,QAAkBuB,MAAAK,EAAAJ,UAAArB,OAA+B0B,MAAAD,EAAAC,OAAsBxB,IAAKe,MAAA,SAAAb,GAAyBX,EAAAkC,cAAAF,EAAA1C,wBAEtuC6C,oBCCjB,ICMAC,QAEA,kBAGA1D,ODXA2D,EAAA,OAcAC,CACA5D,EACAoB,GATA,EAVA,SAAAyC,GACAF,EAAA,SAaA,KAEA,MAUA,UEvBAG,GADiBzC,OAFjB,WAA0B,IAAaG,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBG,OAAOkC,GAAA,SAAYrC,EAAA,eAE5G+B,oBCCjB,IAuBAO,EAvBAL,EAAA,OAcAM,CACAP,EACAI,GATA,EAVA,SAAAD,GACAF,EAAA,SAaA,KAEA,MAUA,QCrBAO,EAAA,EAAId,OAAOe,eAAgB,EAG3B,IAAID,EAAA,GACFE,GAAI,OACJC,YAAcX,IAAAM,GACdM,SAAU","file":"static/js/app.4af02875df5921da2dae.js","sourcesContent":["<template>\r\n  <div class=\"root\">\r\n      <div class=\"container\">\r\n        <canvas \r\n            class=\"canvas\"\r\n            width=\"800px\"\r\n            height=\"600px\"\r\n            @mousedown=\"canvasDown($event)\"\r\n            @mousemove=\"canvasMove($event)\"\r\n            @mouseup=\"canvasUp($event)\"\r\n            @mouseleave=\"canvasOut($event)\"></canvas>\r\n        <div class=\"tools\">\r\n            <div class=\"pen_color\">\r\n                <h4>画笔颜色</h4>\r\n                <ul>\r\n                    <li\r\n                      v-for=\"item in colors\"\r\n                      @click=\"setColor(item)\"\r\n                      :style=\"{ background:item}\"></li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"pen_width\">\r\n                <h4>画笔大小</h4>\r\n                <ul>\r\n                    <li\r\n                      v-for=\"pen in brushs\"\r\n                      :class=\"[pen.className,{'active': config.lineWidth === pen.lineWidth}]\"\r\n                      @click=\"setWidth(pen.lineWidth)\"></li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"canvas_control\">\r\n                <h4>操作</h4>\r\n                <div class=\"canvas_control_btn\">\r\n                    <span \r\n                        v-for=\"control in controls\" \r\n                        :title=\"control.title\" \r\n                        :class=\"control.className\" \r\n                        @click=\"controlCanvas(control.action)\"\r\n                    ></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.container {\r\n    display: flex;\r\n    flex-direction: row;\r\n\r\n}\r\n.canvas {\r\n    border:2px solid black;\r\n}\r\n.tools {\r\n    border:2px solid black;\r\n}\r\nul {\r\n    padding-left: 0px;\r\n}\r\nh4 {\r\n    padding-left: 4em;\r\n}\r\n.pen_color ul {\r\n    display: flex;\r\n    padding-left: 0px;\r\n}\r\n.pen_color ul li{\r\n    display: flex;\r\n    width: 13px;\r\n    height: 13px;\r\n    border: 3px #fff solid;\r\n    margin: 8px;\r\n    cursor: pointer;\r\n}\r\n.pen_width ul {\r\n    padding: 0 50px;\r\n    display: flex;\r\n    justify-content: space-around;\r\n}\r\n.pen_width ul li{\r\n    display: flex;\r\n    width: 13px;\r\n    height: 13px;\r\n    margin: 8px;\r\n    cursor: pointer;\r\n  }\r\n.small {\r\n    font-size: 12px;\r\n}\r\n.middle {\r\n    font-size: 14px;\r\n}\r\n.big {\r\n    font-size: 16px;\r\n}\r\n.canvas_control_btn{\r\n    padding: 0 50px;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    cursor: pointer;\r\n  }\r\n\r\n</style>\r\n\r\n\r\n<script>\r\nexport default {\r\n  name:'Canvas',\r\n  data:function() {\r\n      return{\r\n          colors: ['#fef4ac', '#0018ba', '#ffc200', '#f32f15', '#cccccc', '#5ab639'],\r\n          brushs: [{\r\n          className: 'small fas fa-pencil-alt',\r\n          lineWidth: 3\r\n        }, {\r\n          className: 'middle fas fa-pencil-alt',\r\n          lineWidth: 6\r\n        }, {\r\n          className: 'big fas fa-pencil-alt',\r\n          lineWidth: 12\r\n        }],\r\n          config: {\r\n          lineWidth: 1,\r\n          lineColor: '#f2849e',\r\n          shadowBlur: 2\r\n        },\r\n        context: {},\r\n        canvasMoveUse: false,\r\n        preDrawAry: [],\r\n        nextDrawAry: [],\r\n        middleAry:[]\r\n      }   \r\n  },\r\n   created () {\r\n      this.$emit('setNav', '在线涂鸦画板')\r\n    },\r\n  mounted() {\r\n      const canvas = document.querySelector('.canvas')\r\n      this.context = canvas.getContext('2d')\r\n      this.setCanvasStyle()\r\n      this.initDraw()\r\n  },\r\n  computed: {\r\n      controls() {\r\n        return [{\r\n          title: '上一步',\r\n          action: 'prev',\r\n          className: this.preDrawAry.length ? 'active fa fa-reply' : 'fa fa-reply'\r\n        }, {\r\n          title: '下一步',\r\n          action: 'next',\r\n          className: this.nextDrawAry.length ? 'active fa fa-share' : 'fa fa-share'\r\n        }, {\r\n          title: '清除',\r\n          action: 'clear',\r\n          className: (this.preDrawAry.length || this.nextDrawAry.length) ? 'active fa fa-trash' : 'fa fa-trash'\r\n        }]\r\n      }\r\n  },\r\n  methods: {\r\n      initDraw() {\r\n          var preData = this.context.getImageData(0, 0, 800, 600)\r\n          this.middleAry.push(preData)\r\n      },\r\n       canvasMove (e) {\r\n        if (this.canvasMoveUse) {\r\n            var canvasX = e.clientX - e.target.parentNode.offsetLeft + document.body.scrollLeft\r\n            var canvasY = e.clientY - e.target.parentNode.offsetTop + document.body.scrollTop\r\n            this.context.lineTo(canvasX, canvasY)\r\n            this.context.stroke()\r\n        }\r\n      },\r\n      // mouseup\r\n      canvasUp (e) {\r\n          var preData = this.context.getImageData(0, 0, 800, 600)\r\n          if(!this.nextDrawArylength) {\r\n              this.middleAry.push(preData)\r\n          }else{\r\n              this.middleAry = []\r\n              this,middleAry = this.middleAry.concat(this.preDrawAry)\r\n              this.middleAry.push(preData)\r\n              this.nextDrawAry = []\r\n          }\r\n          this.canvasMoveUse = false\r\n      },\r\n      canvasOut(e) {\r\n          this.canvasMoveUse = false\r\n      },\r\n      // mousedown\r\n      canvasDown (e) {\r\n        this.canvasMoveUse = true\r\n        // client是基于整个页面的坐标\r\n        // offset是cavas距离顶部以及左边的距离\r\n        const canvasX = e.clientX - e.target.parentNode.offsetLeft + document.body.scrollLeft\r\n        const canvasY = e.clientY - e.target.parentNode.offsetTop + document.body.scrollTop\r\n        this.context.beginPath()\r\n        this.setCanvasStyle()\r\n        // 清除子路径\r\n        this.context.beginPath()\r\n        this.context.moveTo(canvasX, canvasY)\r\n        var preData = this.context.getImageData(0, 0, 800, 600)\r\n        this.preDrawAry.push(preData)\r\n      },\r\n      setColor(color) {\r\n          this.config.lineColor = color\r\n      },\r\n      setWidth (type) {\r\n        this.config.lineWidth = type\r\n      },\r\n            controlCanvas (action) {\r\n        switch (action) {\r\n          case 'prev':\r\n            if (this.preDrawAry.length) {\r\n              const popData = this.preDrawAry.pop()\r\n              const midData = this.middleAry[this.preDrawAry.length + 1]\r\n              this.nextDrawAry.push(midData)\r\n              this.context.putImageData(popData, 0, 0)\r\n            }\r\n            break\r\n          case 'next':\r\n            if (this.nextDrawAry.length) {\r\n              const popData = this.nextDrawAry.pop()\r\n              const midData = this.middleAry[this.middleAry.length - this.nextDrawAry.length - 2]\r\n              this.preDrawAry.push(midData)\r\n              this.context.putImageData(popData, 0, 0)\r\n            }\r\n            break\r\n          case 'clear':\r\n            this.context.clearRect(0, 0, this.context.canvas.width, this.context.canvas.height)\r\n            this.preDrawAry = []\r\n            this.nextDrawAry = []\r\n            this.middleAry = [this.middleAry[0]]\r\n            break\r\n        }\r\n      },\r\n      setCanvasStyle () {\r\n      this.context.lineWidth = this.config.lineWidth\r\n      this.context.shadowBlur = this.config.shadowBlur\r\n      this.context.shadowColor = this.config.lineColor\r\n      this.context.strokeStyle = this.config.lineColor\r\n    },\r\n    }\r\n}\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Canvas.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"root\"},[_c('div',{staticClass:\"container\"},[_c('canvas',{staticClass:\"canvas\",attrs:{\"width\":\"800px\",\"height\":\"600px\"},on:{\"mousedown\":function($event){_vm.canvasDown($event)},\"mousemove\":function($event){_vm.canvasMove($event)},\"mouseup\":function($event){_vm.canvasUp($event)},\"mouseleave\":function($event){_vm.canvasOut($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"tools\"},[_c('div',{staticClass:\"pen_color\"},[_c('h4',[_vm._v(\"画笔颜色\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.colors),function(item){return _c('li',{style:({ background:item}),on:{\"click\":function($event){_vm.setColor(item)}}})}))]),_vm._v(\" \"),_c('div',{staticClass:\"pen_width\"},[_c('h4',[_vm._v(\"画笔大小\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.brushs),function(pen){return _c('li',{class:[pen.className,{'active': _vm.config.lineWidth === pen.lineWidth}],on:{\"click\":function($event){_vm.setWidth(pen.lineWidth)}}})}))]),_vm._v(\" \"),_c('div',{staticClass:\"canvas_control\"},[_c('h4',[_vm._v(\"操作\")]),_vm._v(\" \"),_c('div',{staticClass:\"canvas_control_btn\"},_vm._l((_vm.controls),function(control){return _c('span',{class:control.className,attrs:{\"title\":control.title},on:{\"click\":function($event){_vm.controlCanvas(control.action)}}})}))])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b7fd9f7e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Canvas.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b7fd9f7e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Canvas.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Canvas.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Canvas.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b7fd9f7e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Canvas.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Canvas.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <Canvas/>\n  </div> \n</template>\n\n<script>\nimport Canvas from './components/Canvas'\n\nexport default {\n  name: 'App',\n  components: {\n    Canvas\n  }\n}\n</script>\n\n<style>\n@import 'https://use.fontawesome.com/releases/v5.0.9/css/all.css';\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Canvas')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-185d948e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-185d948e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-185d948e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}